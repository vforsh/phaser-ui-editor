# https://github.com/max-sixty/worktrunk
# https://worktrunk.dev/config/#user-config

[post-create]
# Ensure the worktree has a .env by copying it from the master worktree (if missing).
copy-env = "npx tsx ./scripts/worktree/ensure-env.ts"

# Ensure EDITOR_CONTROL_WS_PORT is unique across worktrees.
editor-control-ws-port = "npx tsx ./scripts/worktree/ensure-editor-control-ws-port.ts"

# Install root dependencies for the worktree.
install = "npx tsx ./scripts/worktree/install-deps.ts"

# Build workspace packages (contracts/clients/cli).
build-packages = "npm run build:packages"

[pre-merge]
typecheck = "npm run typecheck"
lint = "npm run lint:fix"
